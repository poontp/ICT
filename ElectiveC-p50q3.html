<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ¼”ç®—æ³•é¸æ“‡é¡Œ</title>
<style>
    body {
        font-family: 'Helvetica Neue', Arial, sans-serif;
        line-height: 1.6;
        background-color: #fdfaf2;
        color: #333;
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
    }
    .container {
        max-width: 800px;
        width: 100%;
        background-color: #fff;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        border: 1px solid #eee;
    }
    h1, h2 {
        color: #c0392b;
        border-bottom: 2px solid #f0e6d2;
        padding-bottom: 10px;
    }
    p {
        margin-bottom: 15px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        font-size: 0.9em;
    }
    th, td {
        border: 1px solid #ccc;
        padding: 10px;
        text-align: center;
    }
    th {
        background-color: #f2f2f2;
    }
    td.subject-header {
        background-color: #f2f2f2;
        font-weight: bold;
    }
    .algorithm-box {
        background-color: #f9f9f9;
        border: 1px solid #ddd;
        padding: 20px;
        border-radius: 5px;
        margin-top: 20px;
        font-family: 'Courier New', Courier, monospace;
        font-size: 1.1em;
    }
    .algorithm-line {
        margin-bottom: 15px;
        display: flex;
        flex-wrap: wrap;
        align-items: center;
    }
    /* æ–°å¢çš„ç¸®æ’æ¨£å¼ */
    .indented {
        padding-left: 2.5em; /* ä½¿ç”¨ em å–®ä½ï¼Œè®“ç¸®æ’éš¨å­—é«”å¤§å°ç¸®æ”¾ */
    }
    select {
        padding: 6px;
        font-family: 'Courier New', Courier, monospace;
        font-size: 1em;
        border: 1px solid #ccc;
        border-radius: 4px;
        margin: 0 5px;
        background-color: #fff;
    }
    .result-span {
        margin-left: 10px;
        font-size: 0.9em;
        flex-basis: 100%;
        margin-top: 5px;
    }
    .correct-icon, .incorrect-icon {
        font-weight: bold;
        font-size: 1.1em;
    }
    .correct-icon { color: #27ae60; }
    .incorrect-icon { color: #c0392b; }
    .explanation {
        color: #555;
        background-color: #f0f0f0;
        padding: 3px 8px;
        border-radius: 4px;
        margin-left: 5px;
        display: inline-block;
    }
    #final-result {
        text-align: center;
        font-size: 1.3em;
        margin-top: 30px;
        padding: 15px;
        border-radius: 5px;
    }
    .final-success-message {
        background-color: #e8f8ef;
        border: 1px solid #2ecc71;
        color: #27ae60;
        font-weight: bold;
    }
    @media (max-width: 600px) {
        body { padding: 10px; }
        .container { padding: 15px; }
        .algorithm-box { font-size: 0.9em; }
        .algorithm-line { flex-direction: column; align-items: flex-start; }
        .result-span { margin-left: 0; }
        .indented { padding-left: 1.5em; } /* åœ¨æ‰‹æ©Ÿä¸Šç¨å¾®æ¸›å°‘ç¸®æ’ */
    }
</style>
</head>
<body>

<div class="container">
    <h1>æ¼”ç®—æ³•é¸æ“‡é¡ŒæŒ‘æˆ°</h1>
    <p>é™³è€å¸«ä»¥äºŒç¶­é™£åˆ— S1A_score å„²å­˜ä¸åŒç§‘ç›®çš„åˆ†æ•¸ã€‚æ¯ä¸€åˆ—å„²å­˜äº†æŸå€‹ç§‘ç›®çš„æ‰€æœ‰å­¸ç”Ÿæˆç¸¾ï¼Œè€Œæ¯ä¸€æ¬„å‰‡å„²å­˜äº†æŸå­¸ç”Ÿçš„æ‰€æœ‰ç§‘ç›®æˆç¸¾ã€‚é™£åˆ—é …ç›® S1A_score[i, j] å„²å­˜å°æ‡‰çš„åˆ†æ•¸ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

    <table>
        <thead>
            <tr>
                <th colspan="2">å­¸ç§‘ (i)</th>
                <th colspan="7">å­¸è™Ÿ (j)</th>
            </tr>
            <tr>
                <th colspan="2"></th>
                <th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th>
            </tr>
        </thead>
        <tbody>
            <tr><td rowspan="4" class="subject-header">å­¸ç§‘</td><td>ä¸­æ–‡ç§‘ (1)</td><td>82</td><td>65</td><td>77</td><td>81</td><td>49</td><td>71</td><td>69</td></tr>
            <tr><td>è‹±æ–‡ç§‘ (2)</td><td>78</td><td>75</td><td>76</td><td>71</td><td>90</td><td>53</td><td>72</td></tr>
            <tr><td>æ•¸å­¸ç§‘ (3)</td><td>64</td><td>77</td><td>73</td><td>67</td><td>63</td><td>81</td><td>61</td></tr>
            <tr><td>éŸ³æ¨‚ç§‘ (4)</td><td>79</td><td>80</td><td>66</td><td>65</td><td>88</td><td>74</td><td>65</td></tr>
        </tbody>
    </table>

    <hr>

    <h2>(a) æ‰¾å‡º 3 è™Ÿå­¸ç”Ÿæ‰€æœ‰å­¸ç§‘çš„å¹³å‡åˆ†æ•¸</h2>
    <div class="algorithm-box">
        <div class="algorithm-line"><code>average3 â† 0</code></div>
        <div class="algorithm-line">
            <code>è¨­ k ç”±</code>
            <select id="a1" onchange="checkAnswer('a1')">
                <option value="">?</option><option value="1">1</option><option value="3">3</option><option value="4">4</option>
            </select>
            <code>è‡³</code>
            <select id="a2" onchange="checkAnswer('a2')">
                <option value="">?</option><option value="3">3</option><option value="4">4</option><option value="7">7</option>
            </select>
            <span id="result-a1-a2" class="result-span"></span>
        </div>
        <div class="algorithm-line indented">
            <code>average3 â†</code>
            <select id="a3" onchange="checkAnswer('a3')">
                <option value="">è«‹é¸æ“‡...</option>
                <option value="average3 + S1A_score[k,3]">average3 + S1A_score[k,3]</option>
                <option value="average3 + S1A_score[3,k]">average3 + S1A_score[3,k]</option>
                <option value="S1A_score[k,3]">S1A_score[k,3]</option>
            </select>
            <span id="result-a3" class="result-span"></span>
        </div>
        <div class="algorithm-line">
            <code>average3 â†</code>
            <select id="a4" onchange="checkAnswer('a4')">
                <option value="">è«‹é¸æ“‡...</option><option value="average3 / 3">average3 / 3</option><option value="average3 / 4">average3 / 4</option><option value="average3 / 7">average3 / 7</option>
            </select>
            <span id="result-a4" class="result-span"></span>
        </div>
        <div class="algorithm-line"><code>è¼¸å‡º average3</code></div>
    </div>

    <hr>

    <h2>(b) æ‰¾å‡ºè©²ç­åˆ¥çš„éŸ³æ¨‚ç§‘å¹³å‡åˆ†æ•¸</h2>
    <div class="algorithm-box">
        <div class="algorithm-line"><code>average_music â† 0</code></div>
        <div class="algorithm-line">
            <code>è¨­ k ç”±</code>
            <select id="b1" onchange="checkAnswer('b1')">
                <option value="">?</option><option value="1">1</option><option value="4">4</option><option value="7">7</option>
            </select>
            <code>è‡³</code>
            <select id="b2" onchange="checkAnswer('b2')">
                <option value="">?</option><option value="1">1</option><option value="4">4</option><option value="7">7</option>
            </select>
            <span id="result-b1-b2" class="result-span"></span>
        </div>
        <div class="algorithm-line indented">
            <code>average_music â†</code>
            <select id="b3" onchange="checkAnswer('b3')">
                <option value="">è«‹é¸æ“‡...</option>
                <option value="average_music + S1A_score[k,4]">average_music + S1A_score[k,4]</option>
                <option value="average_music + S1A_score[4,k]">average_music + S1A_score[4,k]</option>
                <option value="S1A_score[4,k]">S1A_score[4,k]</option>
            </select>
            <span id="result-b3" class="result-span"></span>
        </div>
        <div class="algorithm-line">
            <code>average_music â†</code>
            <select id="b4" onchange="checkAnswer('b4')">
                <option value="">è«‹é¸æ“‡...</option><option value="average_music / 4">average_music / 4</option><option value="average_music / 7">average_music / 7</option>
            </select>
            <span id="result-b4" class="result-span"></span>
        </div>
        <div class="algorithm-line"><code>è¼¸å‡º average_music</code></div>
    </div>

    <div id="final-result"></div>
</div>

<script>
    const solutions = {
        a1: { answer: '1', explanation: 'ç‚ºäº†éæ­·3è™Ÿå­¸ç”Ÿçš„æ‰€æœ‰ç§‘ç›®ï¼Œæˆ‘å€‘éœ€è¦è¿­ä»£é™£åˆ—çš„ã€Œåˆ—ã€ã€‚ç§‘ç›®çš„åˆ—ç´¢å¼• i æ˜¯å¾ 1ï¼ˆä¸­æ–‡ï¼‰åˆ° 4ï¼ˆéŸ³æ¨‚ï¼‰ï¼Œæ‰€ä»¥è¿´åœˆæ‡‰å¾ 1 é–‹å§‹ã€‚' },
        a2: { answer: '4', explanation: 'è¿´åœˆéœ€è¦åŒ…å«æ‰€æœ‰å››å€‹ç§‘ç›®ï¼Œå› æ­¤çµæŸå€¼æ‡‰ç‚ºæœ€å¾Œä¸€ç§‘ï¼ˆéŸ³æ¨‚ï¼‰çš„åˆ—ç´¢å¼• 4ã€‚' },
        a3: { answer: 'average3 + S1A_score[k,3]', explanation: 'åœ¨è¿´åœˆä¸­ï¼Œæˆ‘å€‘å°‡æ¯ä¸€ç§‘çš„åˆ†æ•¸ç´¯åŠ åˆ°ç¸½åˆ†è®Šæ•¸ä¸­ã€‚`k` ä»£è¡¨ç•¶å‰çš„ç§‘ç›®ç´¢å¼•ï¼ˆè®Šå‹•çš„åˆ—ï¼‰ï¼Œè€Œ `3` æ˜¯å›ºå®šçš„å­¸ç”Ÿç´¢å¼•ï¼ˆå›ºå®šçš„æ¬„ï¼‰ã€‚' },
        a4: { answer: 'average3 / 4', explanation: 'è¨ˆç®—å®Œç¸½åˆ†å¾Œï¼Œå¿…é ˆé™¤ä»¥ç§‘ç›®çš„ç¸½æ•¸ï¼ˆå…± 4 ç§‘ï¼‰æ‰èƒ½å¾—åˆ°æ­£ç¢ºçš„å¹³å‡åˆ†æ•¸ã€‚' },
        b1: { answer: '1', explanation: 'ç‚ºäº†è¨ˆç®—éŸ³æ¨‚ç§‘çš„ç­ç´šå¹³å‡ï¼Œæˆ‘å€‘éœ€è¦éæ­·æ‰€æœ‰å­¸ç”Ÿã€‚å­¸ç”Ÿçš„æ¬„ç´¢å¼• j æ˜¯å¾ 1 åˆ° 7ï¼Œæ‰€ä»¥è¿´åœˆæ‡‰å¾ 1 é–‹å§‹ã€‚' },
        b2: { answer: '7', explanation: 'è¿´åœˆéœ€è¦åŒ…å«æ‰€æœ‰ä¸ƒä½å­¸ç”Ÿï¼Œå› æ­¤çµæŸå€¼æ‡‰ç‚ºæœ€å¾Œä¸€ä½å­¸ç”Ÿçš„æ¬„ç´¢å¼• 7ã€‚' },
        b3: { answer: 'average_music + S1A_score[4,k]', explanation: 'åœ¨è¿´åœˆä¸­ï¼Œæˆ‘å€‘å°‡æ¯ä½å­¸ç”Ÿçš„éŸ³æ¨‚åˆ†æ•¸ç´¯åŠ åˆ°ç¸½åˆ†è®Šæ•¸ä¸­ã€‚`4` æ˜¯å›ºå®šçš„éŸ³æ¨‚ç§‘ç´¢å¼•ï¼ˆå›ºå®šçš„åˆ—ï¼‰ï¼Œè€Œ `k` ä»£è¡¨ç•¶å‰çš„å­¸ç”Ÿç´¢å¼•ï¼ˆè®Šå‹•çš„æ¬„ï¼‰ã€‚' },
        b4: { answer: 'average_music / 7', explanation: 'è¨ˆç®—å®ŒéŸ³æ¨‚ç§‘çš„ç¸½åˆ†å¾Œï¼Œå¿…é ˆé™¤ä»¥å­¸ç”Ÿçš„ç¸½æ•¸ï¼ˆå…± 7 äººï¼‰æ‰èƒ½å¾—åˆ°è©²ç§‘çš„ç­ç´šå¹³å‡åˆ†æ•¸ã€‚' }
    };

    const commutativeAnswers = {
        a3: ['average3+S1A_score[k,3]', 'S1A_score[k,3]+average3'],
        b3: ['average_music+S1A_score[4,k]', 'S1A_score[4,k]+average_music']
    };

    function normalize(str) {
        return str.replace(/\s+/g, '');
    }

    function checkAnswer(id) {
        const selectElement = document.getElementById(id);
        const selectedValue = normalize(selectElement.value);
        
        if (id === 'a1' || id === 'a2') {
            const val1 = document.getElementById('a1').value;
            const val2 = document.getElementById('a2').value;
            const resultElement = document.getElementById('result-a1-a2');
            if (val1 && val2) {
                if (val1 === solutions.a1.answer && val2 === solutions.a2.answer) {
                    resultElement.innerHTML = `<span class="correct-icon">âœ… æ­£ç¢ºï¼</span><span class="explanation">${solutions.a1.explanation} ${solutions.a2.explanation}</span>`;
                } else {
                    resultElement.innerHTML = `<span class="incorrect-icon">âŒ éŒ¯èª¤ã€‚</span><span class="explanation">è«‹æª¢æŸ¥è¿´åœˆç¯„åœã€‚æˆ‘å€‘éœ€è¦éæ­·æ‰€æœ‰ç§‘ç›®ï¼ˆåˆ— 1 åˆ° 4ï¼‰ä¾†è¨ˆç®—ä¸€ä½å­¸ç”Ÿçš„å¹³å‡åˆ†ã€‚</span>`;
                }
            }
        } else if (id === 'b1' || id === 'b2') {
            const val1 = document.getElementById('b1').value;
            const val2 = document.getElementById('b2').value;
            const resultElement = document.getElementById('result-b1-b2');
            if (val1 && val2) {
                if (val1 === solutions.b1.answer && val2 === solutions.b2.answer) {
                    resultElement.innerHTML = `<span class="correct-icon">âœ… æ­£ç¢ºï¼</span><span class="explanation">${solutions.b1.explanation} ${solutions.b2.explanation}</span>`;
                } else {
                    resultElement.innerHTML = `<span class="incorrect-icon">âŒ éŒ¯èª¤ã€‚</span><span class="explanation">è«‹æª¢æŸ¥è¿´åœˆç¯„åœã€‚æˆ‘å€‘éœ€è¦éæ­·æ‰€æœ‰å­¸ç”Ÿï¼ˆæ¬„ 1 åˆ° 7ï¼‰ä¾†è¨ˆç®—ä¸€ç§‘çš„å¹³å‡åˆ†ã€‚</span>`;
                }
            }
        } else {
            const resultElement = document.getElementById('result-' + id);
            const solution = solutions[id];
            
            if (selectedValue === "") {
                resultElement.innerHTML = "";
                checkCompletion();
                return;
            }

            let isCorrect = false;
            if (commutativeAnswers[id]) {
                isCorrect = commutativeAnswers[id].map(normalize).includes(selectedValue);
            } else {
                isCorrect = (selectedValue === solution.answer);
            }

            if (isCorrect) {
                resultElement.innerHTML = `<span class="correct-icon">âœ… æ­£ç¢ºï¼</span><span class="explanation">${solution.explanation}</span>`;
            } else {
                resultElement.innerHTML = `<span class="incorrect-icon">âŒ éŒ¯èª¤ã€‚</span><span class="explanation">${solution.explanation}</span>`;
            }
        }
        checkCompletion();
    }

    function checkCompletion() {
        const ids = ['a1-a2', 'a3', 'a4', 'b1-b2', 'b3', 'b4'];
        let allCorrect = true;
        for (const id of ids) {
            const resultElement = document.getElementById('result-' + id);
            if (!resultElement || !resultElement.innerHTML.includes('âœ…')) {
                allCorrect = false;
                break;
            }
        }
        const finalResult = document.getElementById('final-result');
        if (allCorrect) {
            finalResult.innerHTML = `<p class="final-success-message">ğŸ‰ æ­å–œï¼æ‚¨å·²æˆåŠŸå®Œæˆæ‰€æœ‰æŒ‘æˆ°ï¼ ğŸ‰</p>`;
        } else {
            finalResult.innerHTML = '';
        }
    }
</script>

</body>
</html>